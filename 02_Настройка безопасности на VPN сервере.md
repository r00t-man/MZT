[![OS Linux](https://img.shields.io/badge/OS-Linux-blue?logo=linux&logoColor=white)](https://www.linux.org/)
[![OpenSSL](https://img.shields.io/badge/OpenSSL-%E2%9C%94-green?logo=openssl&logoColor=white)](https://www.openssl.org/)
[![Xray](https://img.shields.io/badge/Xray-Ready-orange?logo=github)](https://github.com/XTLS/Xray-core)
[![License](https://img.shields.io/badge/License-MIT-purple)](LICENSE)

> [!IMPORTANT]
> –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è **–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**.  
> ‚ö†Ô∏è **–î–∏—Å–∫–ª–µ–π–º–µ—Ä** ‚ö†Ô∏è  
> –î–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª —Å–æ–∑–¥–∞–Ω *–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö*.  
> –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.  
> –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–∫–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ª–µ–≥–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á.

# –†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –û–°

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH

–ò–∑–º–µ–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
nano /etc/ssh/sshd_config
```

–ü—Ä–∏–º–µ—Ä:

```ini
Port 60022        # –≤—ã–±–∏—Ä–∞–µ–º –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç (60000‚Äì65000)
Banner none
PrintMotd no
DebianBanner no
PasswordAuthentication no    # –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–∫–ª—é—á–∞–µ–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ssh –ö–õ–Æ–ß–ò

```

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:

```bash
systemctl restart ssh
```

*–ó–∞—á–µ–º:* —É–º–µ–Ω—å—à–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ –Ω–∞ SSH. (–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–µ–Ω reboot —Å–µ—Ä–≤–µ—Ä–∞)

---

## üõ° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Fail2Ban

–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥:

```bash
nano /etc/fail2ban/jail.local
```

–ü—Ä–∏–º–µ—Ä –¥–ª—è SSH:

```ini
[sshd]
enabled = true
filter = sshd
action = nftables[name=SSH, port=ssh, protocol=tcp]
logpath = %(syslog_authpriv)s
findtime = 600
maxretry = 2
bantime = -1
backend = systemd
```

### üìñ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

* **enabled = true** ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –∑–∞—â–∏—Ç—É –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
* **filter = sshd** ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π —Ñ–∏–ª—å—Ç—Ä (—à–∞–±–ª–æ–Ω –ø–æ–∏—Å–∫–∞ –≤ –ª–æ–≥–∞—Ö) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
* **action = nftables\[name=SSH, port=ssh, protocol=tcp]** ‚Äî –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –±–∞–Ω–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ –≤ `nftables`, –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç—É SSH.
* **logpath = %(syslog\_authpriv)s** ‚Äî –ø—É—Ç—å –¥–æ –ª–æ–≥–æ–≤ (–≤ Ubuntu 24.04 —á–µ—Ä–µ–∑ systemd-journald –º–∞–ø–ø–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
* **findtime = 600** ‚Äî –∑–∞ –∫–∞–∫–æ–π –ø–µ—Ä–∏–æ–¥ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –∑–¥–µ—Å—å 10 –º–∏–Ω—É—Ç) —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞.
* **maxretry = 2** ‚Äî —Å–∫–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–µ–∂–¥–µ —á–µ–º IP –±—É–¥–µ—Ç –∑–∞–±–∞–Ω–µ–Ω.
* **bantime = -1** ‚Äî –≤—Ä–µ–º—è –±–∞–Ω–∞: `-1` –∑–Ω–∞—á–∏—Ç **–ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ** (IP –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –±–∞–Ω–µ, –ø–æ–∫–∞ –∞–¥–º–∏–Ω –≤—Ä—É—á–Ω—É—é –Ω–µ —Å–Ω–∏–º–µ—Ç).
* **backend = systemd** ‚Äî Fail2Ban –ø–æ–ª—É—á–∞–µ—Ç –ª–æ–≥–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ systemd-journald (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Ubuntu 24).

---

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≤ —Å–∞–º–∏—Ö –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª–∞—Ö (`jail.local`) –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ **–ø–∏—Å–∞—Ç—å –Ω–µ–ª—å–∑—è** ‚Äî Fail2Ban –Ω–µ –ø—Ä–∏–º–µ—Ç —Ç–∞–∫–æ–π —Ñ–∞–π–ª –∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.
–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –ø–æ—è—Å–Ω–µ–Ω–∏—è ‚Äî –ª—É—á—à–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ **–ø–µ—Ä–µ–¥ —Å–µ–∫—Ü–∏—è–º–∏**.

–ó–∞–ø—É—Å–∫:

```bash
systemctl enable fail2ban
systemctl restart fail2ban
```
#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ Fail2Ban
–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:
```bash
sudo fail2ban-client status
```

–°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ jail (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sshd`):
```bash
sudo fail2ban-client status sshd
```

#### –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP-–∞–¥—Ä–µ—Å–∞
–ß—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å:
```bash
sudo fail2ban-client set sshd unbanip 192.168.1.100
```
---

## üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞ (nftables)

‚ö†Ô∏è –ü–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ **–ø–æ—Ä—Ç SSH** –∏ **–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3X-UI** –¥–ª—è –í–µ–±-–∫–∏ –∏ 443 (–∏–ª–∏ 8433 –µ—Å–ª–∏ –∫–∞—Å–∫–∞–¥–Ω—ã–π VPN)

–í —Ñ–∞–π–ª–µ nftables.conf —É–¥–∞–ª—è–µ–º –≤—Å—ë –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∏–∂–µ:

```bash
nano /etc/nftables.conf
```

```nft
#!/usr/sbin/nft -f

flush ruleset

table inet filter {
    chain input {
        type filter hook input priority 0;
        policy drop;

        # Loopback
        iif lo accept

        # –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        ct state established,related accept

        # SSH (—É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –ø–æ—Ä—Ç)
        tcp dport 60022 accept

        # –ü–æ—Ä—Ç—ã –ø–∞–Ω–µ–ª–∏ 3X-UI (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ)
        tcp dport 8443 accept
        tcp dport 60555 accept

        # –ü—Ä–∏–º–µ—Ä: iperf3 —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ IP
        ip saddr 192.168.1.1 tcp dport 5201 accept

    }

    chain forward {
        type filter hook forward priority 0;
        policy drop;
    }

    chain output {
        type filter hook output priority 0;
        policy accept;
    }
}
```

–ü—Ä–∏–º–µ–Ω—è–µ–º:

```bash
systemctl enable nftables
systemctl restart nftables
nft list ruleset
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤ (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–µ)

### üìå –í–∞—Ä–∏–∞–Ω—Ç 1: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ RAM

```ini
[Journal]
Storage=volatile
RuntimeMaxUse=50M
SystemMaxUse=0
```

* –õ–æ–≥–∏ –æ—á–∏—â–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ.
* Fail2Ban: –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ ¬´–∏—Å—Ç–æ—Ä–∏—è¬ª –∞—Ç–∞–∫ –æ–±–Ω—É–ª—è–µ—Ç—Å—è. –≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤, —Ç.–∫. –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –Ω–æ–≤—ã–µ –∞—Ç–∞–∫–∏ —Å–Ω–æ–≤–∞ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è.
* –õ–æ–≥–∏ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ /run/log/journal/ (–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏).
* –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –æ—á–∏—â–∞—é—Ç—Å—è.

---

### üìå –í–∞—Ä–∏–∞–Ω—Ç 2: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫–µ

```ini
[Journal]
Storage=persistent
SystemMaxUse=500M
RuntimeMaxUse=50M
```

* –õ–æ–≥–∏ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø—Ä–∏–≤—ã—á–Ω–æ–º –º–µ—Å—Ç–µ /var/log/journal/ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.
* Fail2Ban: —Å–º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∞—Ç–∞–∫, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Å—Ç–∞—Ä—Ç–∞ —Å–∏—Å—Ç–µ–º—ã.
* –ú–∏–Ω—É—Å: –±–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫ (–æ—Å–æ–±–µ–Ω–Ω–æ SSD/VPS —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º), –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.

–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

   ```bash
   sudo nano /etc/systemd/journald.conf
   ```

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É:

   ```bash
   sudo systemctl restart systemd-journald
   ```
---

‚ö° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≥–¥–µ —Å–µ–π—á–∞—Å —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏:

```bash
journalctl --disk-usage
```

üëâ –ï—Å–ª–∏ `Storage=volatile` ‚Äî –ª–æ–≥–∏ –±—É–¥—É—Ç –≤ `/run/log/journal/` (RAM).
üëâ –ï—Å–ª–∏ `Storage=persistent` ‚Äî –≤ `/var/log/journal/`.

---

---

## üåê –û—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6 –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç ICMP

### –ü–æ—á–µ–º—É –æ—Ç–∫–ª—é—á–∞–µ–º IPv6?

* –ú–Ω–æ–≥–∏–µ VPN –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ IPv4.
* –ï—Å–ª–∏ IPv6 –æ—Å—Ç–∞–≤–∏—Ç—å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º, –≤–æ–∑–º–æ–∂–Ω—ã **—É—Ç–µ—á–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ IP —á–µ—Ä–µ–∑ DNS –∏–ª–∏ –ø—Ä—è–º—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**, —á—Ç–æ –º–æ–∂–µ—Ç ¬´–≤—ã–¥–∞—Ç—å¬ª –≤–∞—Å.

–û—Ç–∫–ª—é—á–µ–Ω–∏–µ:

```bash
echo "GRUB_CMDLINE_LINUX=\"ipv6.disable=1\"" | tee -a /etc/default/grub
update-grub
reboot
```
---

## üîí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ ICMP

–ß—Ç–æ–±—ã —É—Å–ª–æ–∂–Ω–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞—â–∏—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:

```bash
# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ /etc/sysctl.conf
echo "net.ipv4.icmp_echo_ignore_all = 1" >> /etc/sysctl.conf
echo "net.ipv4.icmp_echo_ignore_broadcasts = 1" >> /etc/sysctl.conf
echo "net.ipv4.icmp_ignore_bogus_error_responses = 1" >> /etc/sysctl.conf

# –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
sysctl -p
```

## üìä –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```
ICMP –ø–∞–∫–µ—Ç—ã
‚îú‚îÄ‚îÄ Echo Request (ping)
‚îÇ   ‚îî‚îÄ net.ipv4.icmp_echo_ignore_all = 1  ‚úÖ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –≤—Å–µ ping-–∑–∞–ø—Ä–æ—Å—ã
‚îú‚îÄ‚îÄ Broadcast Echo Request (ping –Ω–∞ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å)
‚îÇ   ‚îî‚îÄ net.ipv4.icmp_echo_ignore_broadcasts = 1  ‚úÖ –∑–∞—â–∏—Ç–∞ –æ—Ç Smurf-–∞—Ç–∞–∫
‚îî‚îÄ‚îÄ –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ ICMP –æ—à–∏–±–∫–∏ (bogus/error)
    ‚îî‚îÄ net.ipv4.icmp_ignore_bogus_error_responses = 1  ‚úÖ –∏–≥–Ω–æ—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏–ª–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö ICMP-–ø–∞–∫–µ—Ç–æ–≤
```

### üîπ –ü–æ—è—Å–Ω–µ–Ω–∏—è

* `icmp_echo_ignore_all` ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–µ ping-–∑–∞–ø—Ä–æ—Å—ã.
* `icmp_echo_ignore_broadcasts` ‚Üí –æ—Ç–¥–µ–ª—å–Ω–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã—Ö ping (Smurf).
* `icmp_ignore_bogus_error_responses` ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ/–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ ICMP —Å–æ–æ–±—â–µ–Ω–∏—è.

‚ö†Ô∏è **–í—ã–≤–æ–¥:** –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞—â–∏—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç ICMP-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—Ç–∞–∫ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤—Å–µ —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤–º–µ—Å—Ç–µ**.

---

### 1Ô∏è‚É£ `net.ipv4.icmp_echo_ignore_all = 1`

* –ü–æ–ª–Ω–æ—Å—Ç—å—é **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ ICMP echo-–∑–∞–ø—Ä–æ—Å—ã** (`ping`).
* –°–µ—Ä–≤–µ—Ä **–Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `ping`** –Ω–∏ –æ—Ç –∫–æ–≥–æ.
* **–í–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ ICMP —Ç–∏–ø–∞ Echo Request**.

---

### 2Ô∏è‚É£ `net.ipv4.icmp_echo_ignore_broadcasts = 1`

* –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç **ping –Ω–∞ broadcast-–∞–¥—Ä–µ—Å–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.1.255).
* –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç **Smurf-–∞—Ç–∞–∫** (–∫–æ–≥–¥–∞ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ —à–ª—ë—Ç ping –Ω–∞ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å, —á—Ç–æ–±—ã –Ω–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ç—å).
* **–ù–µ –¥—É–±–ª–∏—Ä—É–µ—Ç `icmp_echo_ignore_all`**, —Ç.–∫. broadcast –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ `icmp_echo_ignore_all` –æ—Ç–∫–ª—é—á–µ–Ω (`0`).

---

### 3Ô∏è‚É£ `net.ipv4.icmp_ignore_bogus_error_responses = 1`

* –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç **–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ ICMP –æ—à–∏–±–∫–∏**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∞—Ç–∞–∫ –∏–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
* –ü—Ä–∏–º–µ—Ä—ã: ICMP Destination Unreachable —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, ICMP Redirect, ICMP Parameter Problem.
* **–ù–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ Echo Request**, –ø–æ—ç—Ç–æ–º—É –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –ø–µ—Ä–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ.

---

‚úÖ –¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä:

* –û–±–Ω–æ–≤–ª—ë–Ω –∏ –∑–∞—â–∏—â—ë–Ω,
* –†–∞–±–æ—Ç–∞–µ—Ç —Å **3X-UI –ø–∞–Ω–µ–ª—å—é –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏**,
* –° –Ω–∞–¥—ë–∂–Ω—ã–º **—Ñ–∞–µ—Ä–≤–æ–ª–æ–º (nftables)**,
* –° –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏,
* –° –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–º IPv6 (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫).

---
